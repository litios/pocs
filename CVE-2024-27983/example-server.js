const http2 = require('http2');

// Create an HTTP/2 server
const server = http2.createServer();

// Handle incoming requests
server.on('stream', (stream, headers) => {
  let data = '';

  // Collect incoming data
  stream.on('data', (chunk) => {
    data += chunk;
  });

  // When the stream ends, print the received data
  stream.on('end', () => {
    console.log('Received data:', data);
    stream.respond({
      ':status': 200,
      'content-type': 'text/plain'
    });
    stream.end('Data received successfully.');
  });
});

// Start the server and listen on port 3000
server.listen(8444, () => {
  console.log('Server is running on http://localhost:8444');
});
